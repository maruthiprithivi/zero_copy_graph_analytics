# Terraform Variables Template for Customer 360 Demo
# Copy this file to terraform.tfvars.secret and fill in your actual values
# NEVER commit terraform.tfvars.secret to version control

#============================================================================
# REQUIRED VARIABLES - You must provide these values
#============================================================================

# ClickHouse Cloud credentials (get from your ClickHouse Cloud console)
clickhouse_host     = "abc123.clickhouse.cloud"  # Your ClickHouse Cloud host
clickhouse_password = "CHANGE_ME_TO_YOUR_CLICKHOUSE_PASSWORD"
clickhouse_user     = "default"  # Usually 'default' unless you created a custom user
clickhouse_database = "customer360"

# PuppyGraph security (use a strong password)
puppygraph_password = "CHANGE_ME_TO_STRONG_PASSWORD"

# AWS configuration
owner_email = "your-email@company.com"  # Your email for resource tagging

# Security configuration - IMPORTANT: Restrict these in production
allowed_ssh_cidrs = ["YOUR.IP.ADDRESS.HERE/32"]  # Your IP for SSH access
# Example: allowed_ssh_cidrs = ["203.0.113.1/32", "198.51.100.0/24"]

#============================================================================
# OPTIONAL VARIABLES - Override defaults as needed
#============================================================================

# AWS Infrastructure
aws_region = "us-west-2"  # AWS region for deployment
environment = "dev"       # Environment: dev, staging, or prod

# EC2 Instance Configuration
# Recommended instance types by scale:
# - 1M customers: r5.xlarge (4 vCPUs, 32 GB)
# - 10M customers: r5.2xlarge (8 vCPUs, 64 GB)
# - 100M customers: r5.4xlarge (16 vCPUs, 128 GB)
instance_type = "r5.2xlarge"
root_volume_size = 100  # GB - increase for larger datasets

# Data Scale Configuration
# Options: 1000000 (1M), 10000000 (10M), 100000000 (100M)
customer_scale = 1000000

# Monitoring and Performance
enable_monitoring = true

# Application Access (consider restricting in production)
allowed_app_cidrs = ["0.0.0.0/0"]  # Who can access Streamlit and PuppyGraph UIs
# Example: allowed_app_cidrs = ["10.0.0.0/8", "172.16.0.0/12"]

# SSH Key (leave empty to create new key pair)
ssh_key_name = ""  # Use existing key pair name, or leave empty to create new

# Additional ClickHouse Configuration
clickhouse_port = 8443  # Default secure port for ClickHouse Cloud

# PuppyGraph Configuration
puppygraph_username = "puppygraph"  # Default admin username

#============================================================================
# ADVANCED CONFIGURATION - Usually no need to change
#============================================================================

# Additional resource tags
additional_tags = {
  Department  = "Analytics"
  CostCenter  = "Engineering"
  Project     = "Customer360Demo"
}

#============================================================================
# EXAMPLE CONFIGURATIONS BY ENVIRONMENT
#============================================================================

# Development Environment Example:
# environment = "dev"
# instance_type = "r5.xlarge"
# customer_scale = 1000000
# enable_monitoring = false

# Staging Environment Example:
# environment = "staging"
# instance_type = "r5.2xlarge"
# customer_scale = 10000000
# enable_monitoring = true

# Production Environment Example:
# environment = "prod"
# instance_type = "r5.4xlarge"
# customer_scale = 100000000
# enable_monitoring = true
# allowed_app_cidrs = ["10.0.0.0/8"]  # Restrict to VPN/corporate network

#============================================================================
# SECURITY BEST PRACTICES
#============================================================================

# 1. Use strong, unique passwords for all services
# 2. Restrict SSH access to your specific IP address
# 3. In production, restrict application access to corporate networks
# 4. Regularly rotate passwords and access keys
# 5. Enable AWS CloudTrail for audit logging
# 6. Use AWS Secrets Manager for production deployments

#============================================================================
# COST OPTIMIZATION NOTES
#============================================================================

# Estimated monthly costs (us-west-2):
# - r5.xlarge: ~$180/month
# - r5.2xlarge: ~$360/month
# - r5.4xlarge: ~$720/month

# To reduce costs:
# 1. Stop instances when not in use
# 2. Use EC2 Spot instances for development
# 3. Right-size instances based on actual usage
# 4. Monitor ClickHouse Cloud usage and optimize queries